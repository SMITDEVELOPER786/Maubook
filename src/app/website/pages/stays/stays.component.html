<div class="stays-container">
  <!-- LEFT SIDEBAR: Filter Section -->
  <div class="filters-sidebar">
    <div class="filters-header">
      <h3>Filters</h3>
      <button class="reset-btn" type="button" (click)="resetFilters()">Reset</button>
    </div>
    <form (ngSubmit)="filterProperties()">
      <div class="filter-group">
        <h4>Search</h4>
        <input class="custom-search-input" type="text" placeholder="Search title or description..." [(ngModel)]="searchText" name="searchText" />
      </div>
      <div class="filter-group">
        <h4>Price</h4>
        <input class="custom-price-input" type="number" placeholder="Min Price" [(ngModel)]="minPrice" name="minPrice" />
        <input class="custom-price-input" type="number" placeholder="Max Price" [(ngModel)]="maxPrice" name="maxPrice" />
      </div>
      <div class="filter-group">
        <h4>Dates</h4>
        <label for="checkInDate">Check-in date</label>
        <input type="date" id="checkInDate" [(ngModel)]="checkInDate" name="checkInDate" [min]="minDate" />
        <label for="checkOutDate">Check-out date</label>
        <input type="date" id="checkOutDate" [(ngModel)]="checkOutDate" name="checkOutDate" [min]="checkInDate || minDate" />
      </div>
      <div class="filter-group">
        <h4>Guests</h4>
        <select [(ngModel)]="numberOfGuests" name="numberOfGuests">
          <option *ngFor="let guest of guestOptions" [value]="guest">{{ guest }} Guest(s)</option>
        </select>
      </div>
      <button class="custom-filter-btn" type="submit" style="width: 100%; margin-top: 1rem;">Apply</button>
    </form>
  </div>

  <!-- RIGHT SIDE: Main Content -->
  <main class="stays-content">
    <h2>Search from our selection of {{ propertyCount }} properties to book!</h2>
    <div class="property-grid">
      <div *ngIf="loading" class="loading-state">
        Loading properties...
      </div>
      <div *ngIf="error" class="error-state">
        {{ error }}
      </div>
      <div *ngIf="!loading && !error && properties.length === 0" class="empty-state">
        No properties found.
      </div>
      <div class="property-card" *ngFor="let property of properties" (click)="navigateToPropertyDetails(property.id)">
        <div class="property-image">
          <img [src]="property.images[0] || 'assets/fallback.jpg'" [alt]="property.name">
        </div>
        <div class="property-content">
          <div class="property-header">
            <div class="title-section">
              <h3>{{ property.name }}</h3>
              <div class="property-tabs">
                <span class="tab category">{{ property.category | uppercase }}</span>
                <span class="tab region">{{ property.region | uppercase }}</span>
              </div>
            </div>
            <div class="rating">
              <div class="stars">
                <i class="fas fa-star" *ngFor="let star of getFullStars(property.rating)"></i>
                <i class="fas fa-star-half-alt" *ngIf="hasHalfStar(property.rating)"></i>
              </div>
            </div>
          </div>
          <div class="features">
            <span class="feature" *ngFor="let feature of property.features">
              <i class="fas fa-check-circle"></i> {{ feature }}
            </span>
          </div>
          <p class="offer-text">{{ property.offerText }}</p>
          <div class="property-footer">
            <div class="location">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{ property.location }}</span>
            </div>
            <div class="price-section">
              <span>Starting from Rs {{ property.rooms[0].roomPrice | number }}</span>
            </div>
          </div>
          <button class="availability-btn">
            Book Now
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </div>
  </main>
</div>