<div
  class="container-center"
  style="
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
  "
>
  <div style="width: 800px;">
    <!-- Form Section -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title">{{ isEditMode ? 'Edit Account' : 'Add New Account' }}</h2>
        <form
          [formGroup]="AccountForm"
          (ngSubmit)="onSubmit()"
        >
          <div class="row">
            <div class="col-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Bank Name</mat-label>
                <input matInput formControlName="bankName" required />
                <mat-error *ngIf="AccountForm.get('bankName')?.hasError('required')">
                  * Required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Bank Account Name</mat-label>
                <input matInput formControlName="bankAccountName" required />
                <mat-error *ngIf="AccountForm.get('bankAccountName')?.hasError('required')">
                  * Required
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Account Number</mat-label>
                <input matInput formControlName="accountNumber" required />
                <mat-error *ngIf="AccountForm.get('accountNumber')?.hasError('required')">
                  * Required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-6">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Branch</mat-label>
                <input matInput formControlName="branch" required />
                <mat-error *ngIf="AccountForm.get('branch')?.hasError('required')">
                  * Required
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12 d-flex justify-content-end gap-2">
              <button *ngIf="isEditMode" type="button" mat-stroked-button color="warn" (click)="cancelEdit()">
                Cancel
              </button>
              <button
                mat-raised-button
                color="primary"
                type="submit"
                [disabled]="isLoading"
              >
                <mat-spinner
                  *ngIf="isLoading"
                  diameter="20"
                  style="display: inline-block; margin-right: 8px;"
                ></mat-spinner>
                <span [style.visibility]="isLoading ? 'hidden' : 'visible'">
                  {{ isEditMode ? 'Update' : 'Save' }}
                </span>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- List Section -->
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">Bank Accounts</h3>
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>Bank Name</th>
                <th>Account Name</th>
                <th>Account Number</th>
                <th>Branch</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let bankInfo of bankInfo$ | async">
                <td>{{ bankInfo.bankName }}</td>
                <td>{{ bankInfo.bankAccountName }}</td>
                <td>{{ bankInfo.accountNumber }}</td>
                <td>{{ bankInfo.branch }}</td>
                <td>
                  <button
                    mat-icon-button
                    color="primary"
                    (click)="editAccount(bankInfo)"
                    matTooltip="Edit"
                  >
                    <mat-icon>edit</mat-icon>
                  </button>
                  <button
                    mat-icon-button
                    color="warn"
                    (click)="deleteAccount(bankInfo.id!)"
                    matTooltip="Delete"
                  >
                    <mat-icon>delete</mat-icon>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

